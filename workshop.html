<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
  <title>Big</title>
  <link href='big.css' rel='stylesheet' type='text/css' />
  <link href='highlight.github.min.css' rel='stylesheet' type='text/css' />
  <style>

    .new-shiny { background: #aaaaaa; }

    div.slide {
        cursor: text;
    }

    span.attribution {
        display: inline-block;
        position: absolute;
        bottom: 10px;
        right: 10px;
        font-size: 18px;
    }

    span.attribution a {
        background-color: transparent;
        color: #0086b3;
    }

    .hljs {
        background: lightyellow;
    }

  </style>
  <script src='big.js'></script>
  <script src='highlight.js'></script>
  <script>
    hljs.configure({languages: ['python']});
    hljs.initHighlightingOnLoad();
  </script>
</head>
<body>
    <span class="attribution"><img src="twitter.png" style="width: 20px;position: relative;top: 4px;padding-right: 0.25em;" /><a href="https://www.twitter.com/_walkermatt">@_walkermatt</a> <img src="astun.png" style="width: 20px;position: relative;top: 4px;padding-left: 0.5em;padding-right: 0.25em;" /><a href="mailto:mattwalker@astuntechnology.com">mattwalker@astuntechnology.com</a></span>
<div>
<h1 id="extending-qgis-with-python">Extending QGIS with Python</h1>
</div>
<div>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Software
<ul>
<li>QGIS 2.14 or &gt;= 2.18.5
<ul>
<li>On Windows, Linux or Mac with Python support</li>
</ul></li>
</ul></li>
<li>Download sample data locally
<ul>
<li>Natural Earth, populated places
<ul>
<li><a href="http://bit.ly/2pVHwlp" class="uri">http://bit.ly/2pVHwlp</a></li>
</ul></li>
<li>Natural Earth, airports
<ul>
<li><a href="http://bit.ly/2qQvqP9" class="uri">http://bit.ly/2qQvqP9</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div>
<h2 id="outline">Outline</h2>
<ul>
<li>What's possible</li>
<li>Python basics</li>
<li>PyQGIS exercises</li>
</ul>
</div>
<div>
<h2 id="whats-possible">What's possible</h2>
<ul>
<li>Run a script on
<ul>
<li>startup</li>
<li>project open, save or close</li>
</ul></li>
<li><em>Custom expressions</em></li>
<li><em>Python console &amp; scripts</em></li>
<li>Processing scripts</li>
<li>Plugins</li>
<li>Standalone applications</li>
</ul>
</div>
<div>
<h2 id="python-basics">Python basics</h2>
</div>
<div data-background-image="python.jpg" style="color: white">
<h2 id="pythons-quite-friendly">Python's quite friendly</h2>
</div>
<div>
<h3 id="qgis-python-console">QGIS Python Console</h3>
<ul>
<li>Open via
<ul>
<li><code>Plugins â€£ Python Console</code></li>
</ul></li>
<li>Allows you to run Python code and interact with QGIS itself</li>
</ul>
</div>
<div>
<h3 id="hello-world">Hello World!</h3>
<pre><code>print &quot;Hello World!&quot;</code></pre>
</div>
<div>
<h3 id="strings">Strings</h3>
<pre><code>&quot;Hello World!&quot;

# Concatenate strings
&quot;Hello&quot; + &quot; &quot; + &quot;World!&quot;

# String formatting
&quot;Hello %s&quot; % &quot;World!&quot;

# Double or single quotes are allowed
&#39;Python is &quot;fun&quot;&#39;</code></pre>
</div>
<div>
<pre><code># Multi-line strings
print &quot;&quot;&quot;This string
is split over
multiple lines&quot;&quot;&quot;

# Special characters such as a newline,
# tab and backslash can be included
# via an escape sequence which starts
# with a backslash

print &quot;This string\nis split over\nmultiple lines&quot;

print &quot;C:\\Users\\natalie&quot;

# You can use a &quot;raw&quot; string to avoid escape sequences
print r&quot;C:\Users\natalie&quot;</code></pre>
</div>
<div>
<h3 id="numbers">Numbers</h3>
<pre><code>10

# Parse a number from a string
# or truncate a `float`
int(&quot;10&quot;)

# Arithmetic is largely as you&#39;d expect

10 + 1

10 - 1

10 * 2

10 / 2</code></pre>
</div>
<div>
<pre><code># Floor division is the default
# with `int` values
10 / 3

# If at least one of the numbers
# is a _float you get true division
# which is probably what you expect
10 / 3.0

# This is equiverlent to above
10 / float(3)</code></pre>
</div>
<div>
<h2 id="booleans">Booleans</h2>
<pre><code>True

False

# and, or operators

True and True

True and False

False or True</code></pre>
</div>
<div>
<h3 id="variables">Variables</h3>
<pre><code>year = 2017

print year

last_year = year - 1

print last_year</code></pre>
</div>
<div>
<h3 id="flow-control">Flow control</h3>
<pre><code>latitude = 51.5
if latitude &gt;= 0:
    zone_letter = &#39;N&#39;
else:
    zone_letter = &#39;S&#39;

print zone_letter</code></pre>
</div>
<div>
<h3 id="lists">Lists</h3>
<pre><code>l = [3, 5, 4, 2, 1]

print l

# Access elements via position
# (the first element is at 0)
print l[0]</code></pre>
</div>
<div>
<h3 id="loops">Loops</h3>
<pre><code>for char in &quot;Hello World!&quot;:
    print char

for num in [3, 5, 4, 2, 1]:
    print num</code></pre>
</div>
<div>
<h3 id="imports">Imports</h3>
<pre><code># Import a module and call a function it provides
import math
math.floor(10.6)

# Import individual items from a module
from os import path
path.join(r&#39;C:\Users&#39;, &#39;Matt&#39;)</code></pre>
</div>
<div>
<h3 id="objects">Objects</h3>
<pre><code># Objects represent a value and expose
# properties and methods
&#39;qgis&#39;.upper()

# You work with a lot of objects in PyQGIS!
iface.activeLayer().name()

# Some method calls return objects
iface.activeLayer()

# You can get help about an object using the help
# function or you can look the Class name up in
# the docs (or Google it)
help(iface.activeLayer())

# When we find a method or property we&#39;re
# interested in we can use it
iface.activeLayer().extent()</code></pre>
</div>
<div>
<h3 id="functions">Functions</h3>
<pre><code># Calling an existing function
sorted([3, 5, 4, 2, 1])

# Defining your own function
def GetUtmZone(longitude, latitude):
    zone_number = math.floor(((longitude + 180) / 6) % 60) + 1
    if latitude &gt;= 0:
        zone_letter = &#39;N&#39;
    else:
        zone_letter = &#39;S&#39;
    return &#39;%d%s&#39; % (int(zone_number), zone_letter)

# Get UTM Zone for London
GetUtmZone(-0.1275, 51.5072)</code></pre>
</div>
<div>
<p><a href="http://labs.webgeodatavore.com/partage/diagramme_principal.html"><img src="pyqgis_api.png" /></a></p>
</div>
<div data-background-image="kitten.jpg" style="color: white">

</div>
<div>
<h2 id="pyqgis-exercises">PyQGIS exercises</h2>
<ul>
<li><a href="https://astuntechnology.github.io/qgis-tutorials/html/en/docs/custom_python_functions.html">Using Custom Python Expression Functions</a></li>
<li><a href="https://astuntechnology.github.io/qgis-tutorials/html/en/docs/getting_started_with_pyqgis.html">Getting Started With Python Programming</a></li>
</ul>
</div>
<div>
<h2 id="where-next">Where next?</h2>
<p>Further reading and learning to do more with Python and QGIS.</p>
<ul>
<li><a href="https://developers.google.com/edu/python/">Google's Python Class</a></li>
<li><a href="https://docs.python.org/2.7/tutorial/index.html">Official Python Tutorial</a></li>
<li><a href="http://geoapis.sourcepole.com/">PyQGIS, Python etc. API docs</a></li>
<li><a href="http://docs.qgis.org/2.14/en/docs/pyqgis_developer_cookbook/">PyQGIS Developer Cookbook</a></li>
<li>Python Scripting (PyQGIS) section of <a href="http://www.qgistutorials.com/en/index.html">QGIS Tutorials and Tips</a></li>
</ul>
</div>
<div>
<p>Thank you</p>
</div>
</body>
</html>
